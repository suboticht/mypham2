/*/////////////////////////////////////////////////////////////////////////
NHK 汎用HLSプレイヤーJS
/////////////////////////////////////////////////////////////////////////*/
var ieVer,_apProtocol_IE="https:",_apProtocol=window.location.protocol,_apPlayerPath="/common/aplayer/ifr.html",_apK=2,_apIframes=[],_apWindowProxy={},$x=0,$s="-st",$s1="tg-",$s2="ev-",$s3=/www[1-9]\.nhk\.or\.jp/,$d=document.domain.indexOf($s)>-1||document.domain.indexOf($s1)>-1||document.domain.indexOf($s2)>-1||null!=document.domain.match($s3)?document.domain:"www.nhk.or.jp",_apPlayerDomain="//"+$d;function _apFire(){"undefined"!=typeof jQuery&&($x>0||($x++,$("<style>.nol_audio_player iframe{border:0;width:100%;height:170px;-webkit-transition:all 0.55s; transition:all 0.55s;border-radius:2px;display:block;}.nol_audio_player iframe.notitle{height:140px;}</style>").prependTo("head"),$(".nol_audio_player").each(function(a){var e="ifrId=_apIfr"+a+"&playerstyle="+$(this).attr("data-skin")+"&autoplay="+$(this).attr("data-autoplay")+"&playertype="+$(this).attr("data-type")+"&hlsurl="+encodeURIComponent($(this).attr("data-hlsurl"))+"&varispd="+$(this).attr("data-variable-speed");_apQ(e,_apK);var t=void 0!=$(this).attr("data-title")?encodeURIComponent($(this).attr("data-title")):"",r=void 0!=$(this).attr("data-aa")?encodeURIComponent($(this).attr("data-aa")):"",o=void 0!=$(this).attr("data-time")?encodeURIComponent($(this).attr("data-time")):"",n=void 0!=$(this).attr("data-aa-header")?encodeURIComponent($(this).attr("data-aa-header")):"",d=void 0!=$(this).attr("data-custom-css")?encodeURIComponent($(this).attr("data-custom-css")):"",p="optin";window.top.location.href.indexOf("oout=00001")>-1&&(p="optout"),document.referrer.indexOf("oout=00001")>-1&&(p="optout"),location.href.indexOf("oout=00001")>-1&&(p="optout");var s=window==window.parent?location.href:window.top.location.href,u=s.indexOf("//dev-www")>-1||s.indexOf("//stg-www")>-1||s.indexOf("superster")>-1?"stg":"www";$('<iframe id="_apIfr'+a+'" name="_apIfr'+a+'" scrolling="no" frameborder="0"></iframe>').appendTo(this);var f=document.getElementById("_apIfr"+a);f.src=_apProtocol+_apPlayerDomain+_apPlayerPath,f.onload=function(){f.contentWindow.postMessage("render:"+_apK+encodeURIComponent(e)+"&title="+t+"&aa="+r+"&stt="+o+"&aahead="+n+"&customcss="+d+"&optoutstatus="+p+"&hostserver="+u,_apProtocol+_apPlayerDomain)},_apIframes.push("_apIfr"+a)}),window.addEventListener("message",function(a){if(externalfunc(a.data),"string"!=typeof a.data);else if(0==a.data.indexOf("clientHeight"))$("#"+a.data.split(",")[1]).css({height:a.data.split(",")[2],overflow:"hidden"});else if(0==a.data.indexOf("playing")){for(i in _apIframes)if(_apIframes[i]!=a.data.split(",")[1]){var e=document.getElementById(_apIframes[i]);try{e.contentWindow.postMessage("stop",_apProtocol+_apPlayerDomain)}catch(t){}}}else 0==a.data.indexOf("reload")&&location.reload()},!1)))}function _apQ(a,e){a=encodeURIComponent(a);for(var t="",r=0;r<a.length;r++)t+=String.fromCharCode(a.charCodeAt(r)+e);return t}function addOnload(a){try{window.addEventListener("load",a,!1)}catch(e){window.attachEvent("onload",a)}}function _apLoad(){"undefined"!=typeof jQuery?_portHole():((_apJQueryScript=document.createElement("script")).src="/common/jquery/jquery-2.2.js",_apJQueryScript.addEventListener?_apJQueryScript.addEventListener("load",_portHole,!1):_apJQueryScript.readyState&&(_apJQueryScript.onreadystatechange=_portHole),document.body.appendChild(_apJQueryScript))}function _portHole(){_apFire()}void 0===window.console&&(window.console={log:function(){}}),addOnload(function(){_apLoad()});var externalfunc=function(a){},_ap_ua={};_ap_ua.name=window.navigator.userAgent.toLowerCase(),_ap_ua.isOldEdge=_ap_ua.name.indexOf("applewebkit")>=0&&_ap_ua.name.indexOf("edge/")>=0,_ap_ua.isNewEdge=_ap_ua.name.indexOf("applewebkit")>=0&&_ap_ua.name.indexOf("edg/")>=0,_ap_ua.isEdge=_ap_ua.isOldEdge||_ap_ua.isNewEdge,_ap_ua.isIE=_ap_ua.name.indexOf("msie")>=0||_ap_ua.name.indexOf("trident")>=0,_ap_ua.isiPhone=_ap_ua.name.indexOf("iphone")>=0,_ap_ua.isiPod=_ap_ua.name.indexOf("ipod")>=0,_ap_ua.isiPad=_ap_ua.name.indexOf("ipad")>-1||_ap_ua.name.indexOf("macintosh")>-1&&"ontouchend"in document,_ap_ua.isiOS=_ap_ua.isiPhone||_ap_ua.isiPod||_ap_ua.isiPad,_ap_ua.isAndroid=_ap_ua.name.indexOf("android")>=0,_ap_ua.isTablet=_ap_ua.isiPad||_ap_ua.isAndroid&&0>_ap_ua.name.indexOf("mobile"),_ap_ua.isIE&&(_ap_ua.verArray=/(msie|rv:?)\s?([0-9]{1,})([\.0-9]{1,})/.exec(_ap_ua.name),_ap_ua.verArray&&(_ap_ua.ver=parseInt(_ap_ua.verArray[2],10))),_ap_ua.isiOS&&(_ap_ua.verArray=/(os)\s([0-9]{1,})([\_0-9]{1,})/.exec(_ap_ua.name),_ap_ua.verArray&&(_ap_ua.ver=parseInt(_ap_ua.verArray[2],10))),_ap_ua.isAndroid&&(_ap_ua.verArray=/(android)\s([0-9]{1,})([\.0-9]{1,})/.exec(_ap_ua.name),_ap_ua.verArray&&(_ap_ua.ver=parseInt(_ap_ua.verArray[2],10))),_ap_ua.isMacSafari=!_ap_ua.isiOS&&!_ap_ua.isAndroid&&-1!==_ap_ua.name.indexOf("safari")&&-1===_ap_ua.name.indexOf("chrome"),_ap_ua.isIE&&(ieVer=parseInt(_ap_ua.name.match(/((msie|MSIE)\s|rv:)([\d\.]+)/)[3],10));var _ap_browser={};-1!=_ap_ua.name.indexOf("trident/7")?_ap_browser.isIE11=!0:-1!=_ap_ua.name.indexOf("chrome")?_ap_browser.isChrome=!0:-1!=_ap_ua.name.indexOf("crios")?_ap_browser.isChrome=!0:-1!=_ap_ua.name.indexOf("fxios")?_ap_browser.isFirefox=!0:-1!=_ap_ua.name.indexOf("safari")?_ap_browser.isSafari=!0:-1!=_ap_ua.name.indexOf("firefox")&&(_ap_browser.isFirefox=!0);var _legacyIE=!(!_ap_ua.isIE||_ap_ua.name.match(/win(dows )?nt 10\.0/)||_ap_ua.name.match(/win(dows )?nt 6\.3/));